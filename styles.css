:root {
    --bg: #f3f4f8;
    --bg2: #ffffff;
    --bg3: #eef0f5;
    --tx: #1a1a2e;
    --tx2: #555770;
    --tx3: #8e90a6;
    --acc: #6c5ce7;
    --acc2: #a29bfe;
    --accbg: rgba(108,92,231,.1);
    --green: #00b894;
    --greenbg: rgba(0,184,148,.1);
    --red: #e17055;
    --redbg: rgba(225,112,85,.1);
    --warn: #fdcb6e;
    --warnbg: rgba(253,203,110,.15);
    --brd: #e0e2ec;
    --sh1: 0 1px 4px rgba(0,0,0,.06);
    --sh2: 0 6px 20px rgba(0,0,0,.08);
    --sh3: 0 12px 40px rgba(0,0,0,.12);
    --r1: 8px;
    --r2: 14px;
    --r3: 20px;
    --tr: .25s ease;
}
[data-theme="dark"] {
    --bg: #0d1117;
    --bg2: #161b22;
    --bg3: #21262d;
    --tx: #e6edf3;
    --tx2: #8b949e;
    --tx3: #484f58;
    --brd: #30363d;
    --sh1: 0 1px 4px rgba(0,0,0,.3);
    --sh2: 0 6px 20px rgba(0,0,0,.4);
    --sh3: 0 12px 40px rgba(0,0,0,.5);
}
* { margin:0; padding:0; box-sizing:border-box; }
body {
    font-family:'Poppins',sans-serif;
    background:var(--bg);
    color:var(--tx);
    transition:background var(--tr),color var(--tr);
    min-height:100vh;
    -webkit-font-smoothing:antialiased;
}
.hidden { display:none!important; }
#app { max-width:880px; margin:0 auto; padding:0 16px 60px; }
header {
    display:flex; align-items:center; justify-content:space-between;
    padding:18px 0; position:sticky; top:0; z-index:90;
    background:var(--bg); transition:background var(--tr);
}
.header-left { display:flex; align-items:center; gap:10px; }
.logo-icon {
    width:38px; height:38px; border-radius:10px;
    background:linear-gradient(135deg,var(--acc),var(--acc2));
    color:#fff; font-weight:900; font-size:20px;
    display:flex; align-items:center; justify-content:center;
}
.brand { font-size:22px; font-weight:800; color:var(--tx); }
.brand span { color:var(--acc); }
.theme-toggle { cursor:pointer; user-select:none; }
.toggle-track {
    width:56px; height:30px; border-radius:15px;
    background:var(--brd); position:relative;
    display:flex; align-items:center; justify-content:space-between;
    padding:0 6px; transition:background var(--tr);
}
[data-theme="dark"] .toggle-track { background:var(--acc); }
.toggle-sun,.toggle-moon { font-size:14px; z-index:1; }
.toggle-thumb {
    width:24px; height:24px; border-radius:50%;
    background:#fff; position:absolute; top:3px; left:3px;
    transition:transform var(--tr); box-shadow:var(--sh1);
}
[data-theme="dark"] .toggle-thumb { transform:translateX(26px); }
.tabs {
    display:flex; gap:4px; background:var(--bg2);
    padding:4px; border-radius:var(--r2); box-shadow:var(--sh1);
    margin-bottom:24px; transition:background var(--tr);
}
.tab {
    flex:1; padding:11px 12px; border:none; background:transparent;
    color:var(--tx2); font-family:inherit; font-size:13px;
    font-weight:600; border-radius:var(--r1); cursor:pointer;
    transition:all var(--tr); display:flex; align-items:center;
    justify-content:center; gap:6px; position:relative;
}
.tab:hover { color:var(--tx); background:var(--bg3); }
.tab.active { background:var(--acc); color:#fff; box-shadow:var(--sh1); }
.tab-ico { font-size:15px; }
.tab-badge {
    position:absolute; top:4px; right:8px;
    background:var(--red); color:#fff; font-size:10px;
    font-weight:700; min-width:18px; height:18px;
    border-radius:9px; display:flex; align-items:center;
    justify-content:center; padding:0 4px;
}
.tab.active .tab-badge { background:#fff; color:var(--acc); }
.section { display:none; animation:fadeUp .3s ease; }
.section.active { display:block; }
@keyframes fadeUp { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }
.sec-top {
    display:flex; align-items:center; justify-content:space-between;
    margin-bottom:20px; flex-wrap:wrap; gap:10px;
}
.sec-top h2 { font-size:20px; font-weight:700; }
.btn-accent {
    background:var(--acc); color:#fff; border:none;
    padding:10px 18px; border-radius:var(--r1);
    font-family:inherit; font-size:13px; font-weight:600;
    cursor:pointer; transition:all var(--tr);
    display:inline-flex; align-items:center; gap:6px;
}
.btn-accent:hover { background:var(--acc2); transform:translateY(-1px); box-shadow:var(--sh2); }
.btn-accent:disabled { opacity:.5; cursor:not-allowed; transform:none; }
.btn-outline {
    background:var(--bg3); color:var(--tx); border:1px solid var(--brd);
    padding:10px 18px; border-radius:var(--r1);
    font-family:inherit; font-size:13px; font-weight:600;
    cursor:pointer; transition:all var(--tr);
    display:inline-flex; align-items:center; gap:6px;
}
.btn-outline:hover { background:var(--brd); }
.btn-green { background:var(--green)!important; }
.btn-green:hover { opacity:.9; }
.btn-block { width:100%; justify-content:center; padding:12px; font-size:14px; }
.btn-sm { padding:7px 14px; font-size:12px; }
.btn-circle {
    width:34px; height:34px; border-radius:50%; border:none;
    background:var(--bg3); color:var(--tx); font-size:16px;
    cursor:pointer; transition:all var(--tr);
    display:flex; align-items:center; justify-content:center;
}
.btn-circle:hover { background:var(--brd); }
.btn-ico { font-size:16px; }
.quiz-grid {
    display:grid; grid-template-columns:repeat(auto-fill,minmax(250px,1fr));
    gap:14px;
}
.qcard {
    background:var(--bg2); border-radius:var(--r2);
    padding:20px; border:1px solid var(--brd);
    box-shadow:var(--sh1); transition:all var(--tr);
    position:relative; overflow:hidden;
}
.qcard::after {
    content:''; position:absolute; top:0; left:0; right:0;
    height:3px; background:linear-gradient(90deg,var(--acc),var(--acc2));
    transform:scaleX(0); transition:transform var(--tr); transform-origin:left;
}
.qcard:hover { transform:translateY(-3px); box-shadow:var(--sh2); border-color:var(--acc); }
.qcard:hover::after { transform:scaleX(1); }
.qcard-emoji { font-size:32px; margin-bottom:10px; display:block; }
.qcard-tag {
    position:absolute; top:12px; right:12px;
    background:var(--accbg); color:var(--acc);
    padding:2px 10px; border-radius:20px;
    font-size:10px; font-weight:700; text-transform:uppercase;
}
.qcard h3 { font-size:15px; font-weight:700; margin-bottom:6px; padding-right:60px; }
.qcard-meta { display:flex; gap:10px; flex-wrap:wrap; margin-bottom:14px; }
.qcard-meta span { font-size:11px; color:var(--tx3); display:flex; align-items:center; gap:3px; }
.qcard-btns { display:flex; gap:8px; }
.qcard-btns button {
    flex:1; padding:8px; border-radius:var(--r1);
    font-family:inherit; font-size:12px; font-weight:600;
    cursor:pointer; transition:all var(--tr); border:none;
}
.qbtn-start { background:var(--acc); color:#fff; }
.qbtn-start:hover { background:var(--acc2); }
.qbtn-bm { background:var(--warnbg); color:#b58900; }
.qbtn-bm.is-bm { background:var(--warn); color:#fff; }
.qbtn-bm:hover { opacity:.85; }
.qbtn-del { background:var(--redbg); color:var(--red); }
.qbtn-del:hover { background:var(--red); color:#fff; }
.empty {
    text-align:center; padding:50px 20px; color:var(--tx3);
}
.empty-ico { font-size:48px; margin-bottom:10px; display:block; }
.empty p { font-size:15px; font-weight:500; }
.empty-sub { font-size:13px; margin-top:4px; color:var(--tx3); }
.quiz-header {
    display:flex; align-items:center; gap:12px; margin-bottom:14px;
}
.quiz-hdr-info { flex:1; text-align:center; }
.qz-title { font-size:15px; font-weight:700; display:block; }
.qz-prog { font-size:11px; color:var(--tx3); }
.qz-timer {
    font-size:16px; font-weight:700; color:var(--acc);
    background:var(--accbg); padding:6px 14px;
    border-radius:var(--r1); font-variant-numeric:tabular-nums;
}
.qz-timer.danger { color:var(--red); background:var(--redbg); animation:blink 1s infinite; }
@keyframes blink { 50%{opacity:.5} }
.prog-bar {
    height:5px; background:var(--brd); border-radius:3px;
    margin-bottom:18px; overflow:hidden;
}
.prog-fill {
    height:100%; width:0%;
    background:linear-gradient(90deg,var(--acc),var(--acc2));
    border-radius:3px; transition:width .4s ease;
}
.q-area {
    background:var(--bg2); border-radius:var(--r2);
    padding:26px; box-shadow:var(--sh1); border:1px solid var(--brd);
    min-height:280px; transition:all var(--tr);
}
.q-top { display:flex; align-items:center; gap:10px; margin-bottom:18px; }
.q-num {
    background:var(--acc); color:#fff; padding:3px 12px;
    border-radius:20px; font-size:12px; font-weight:700;
}
.q-cat { font-size:11px; color:var(--tx3); flex:1; }
.q-text { font-size:17px; font-weight:600; line-height:1.7; margin-bottom:22px; }
.q-opts { display:flex; flex-direction:column; gap:9px; }
.opt-btn {
    display:flex; align-items:center; gap:12px;
    padding:13px 16px; background:var(--bg3); border:2px solid var(--brd);
    border-radius:var(--r1); cursor:pointer; transition:all var(--tr);
    font-family:inherit; font-size:14px; color:var(--tx);
    text-align:left; width:100%;
}
.opt-btn:hover { border-color:var(--acc); background:var(--accbg); }
.opt-btn.picked { border-color:var(--acc); background:var(--accbg); }
.opt-btn.right { border-color:var(--green); background:var(--greenbg); }
.opt-btn.wrong { border-color:var(--red); background:var(--redbg); }
.opt-ltr {
    width:30px; height:30px; border-radius:50%; background:var(--bg2);
    display:flex; align-items:center; justify-content:center;
    font-weight:700; font-size:13px; flex-shrink:0;
    border:1px solid var(--brd); transition:all var(--tr);
}
.opt-btn.picked .opt-ltr { background:var(--acc); color:#fff; border-color:var(--acc); }
.opt-btn.right .opt-ltr { background:var(--green); color:#fff; border-color:var(--green); }
.opt-btn.wrong .opt-ltr { background:var(--red); color:#fff; border-color:var(--red); }
.opt-txt { flex:1; line-height:1.4; }
.q-nav {
    display:flex; align-items:center; justify-content:space-between;
    margin-top:18px; gap:10px; flex-wrap:wrap;
}
.btn-nav {
    padding:9px 18px; border:1px solid var(--brd); background:var(--bg2);
    color:var(--tx); border-radius:var(--r1); font-family:inherit;
    font-size:13px; font-weight:600; cursor:pointer; transition:all var(--tr);
}
.btn-nav:hover { background:var(--bg3); }
.btn-nav:disabled { opacity:.35; cursor:not-allowed; }
.btn-nav.btn-accent { border:none; }
.dot-wrap { display:flex; gap:5px; flex-wrap:wrap; justify-content:center; flex:1; }
.dot {
    width:26px; height:26px; border-radius:50%;
    border:2px solid var(--brd); background:var(--bg2);
    font-size:10px; font-weight:700; color:var(--tx3);
    display:flex; align-items:center; justify-content:center;
    cursor:pointer; transition:all var(--tr);
}
.dot:hover { border-color:var(--acc); }
.dot.now { background:var(--acc); color:#fff; border-color:var(--acc); }
.dot.done { border-color:var(--green); background:var(--greenbg); color:var(--green); }
.rv-card {
    background:var(--bg2); border-radius:var(--r3); padding:36px 24px;
    box-shadow:var(--sh2); border:1px solid var(--brd);
    text-align:center; margin-bottom:24px;
}
.rv-heading { font-size:22px; margin-bottom:20px; }
.rv-circle { position:relative; width:150px; height:150px; margin:0 auto 20px; }
.rv-circle svg { width:100%; height:100%; transform:rotate(-90deg); }
.rv-bg { fill:none; stroke:var(--brd); stroke-width:8; }
.rv-arc {
    fill:none; stroke:var(--acc); stroke-width:8;
    stroke-linecap:round; stroke-dasharray:314.16;
    stroke-dashoffset:314.16; transition:stroke-dashoffset 1.2s ease, stroke .4s;
}
.rv-arc.s-great { stroke:var(--green); }
.rv-arc.s-good { stroke:var(--acc); }
.rv-arc.s-ok { stroke:var(--warn); }
.rv-arc.s-bad { stroke:var(--red); }
.rv-inner {
    position:absolute; inset:0; display:flex;
    flex-direction:column; align-items:center; justify-content:center;
}
.rv-pct { font-size:34px; font-weight:800; }
.rv-lbl { font-size:12px; color:var(--tx3); }
.rv-stats { display:flex; justify-content:center; gap:24px; flex-wrap:wrap; margin-bottom:24px; }
.rv-stat { text-align:center; }
.rv-stat b { font-size:20px; display:block; }
.rv-stat b.g { color:var(--green); }
.rv-stat b.r { color:var(--red); }
.rv-stat b.m { color:var(--tx3); }
.rv-stat small { font-size:11px; color:var(--tx3); }
.rv-actions { display:flex; gap:10px; justify-content:center; flex-wrap:wrap; }
.rv-review { display:flex; flex-direction:column; gap:10px; }
.rr-item {
    background:var(--bg2); border-radius:var(--r2); padding:18px;
    border:1px solid var(--brd);
}
.rr-head { display:flex; align-items:center; gap:10px; margin-bottom:10px; }
.rr-icon {
    width:24px; height:24px; border-radius:50%;
    display:flex; align-items:center; justify-content:center;
    font-size:12px; flex-shrink:0;
}
.rr-icon.ic-g { background:var(--greenbg); color:var(--green); }
.rr-icon.ic-r { background:var(--redbg); color:var(--red); }
.rr-icon.ic-s { background:var(--bg3); color:var(--tx3); }
.rr-q { font-size:14px; font-weight:600; flex:1; }
.rr-opts { display:flex; flex-direction:column; gap:5px; margin-left:34px; }
.rr-o {
    padding:7px 12px; border-radius:var(--r1);
    font-size:13px; background:var(--bg3); border:1px solid transparent;
}
.rr-o.is-right { background:var(--greenbg); border-color:var(--green); color:var(--green); font-weight:600; }
.rr-o.is-wrong { background:var(--redbg); border-color:var(--red); color:var(--red); }
.stats-row {
    display:grid; grid-template-columns:repeat(auto-fill,minmax(120px,1fr));
    gap:10px; margin-bottom:22px;
}
.stat-box {
    background:var(--bg2); border-radius:var(--r2); padding:16px;
    text-align:center; border:1px solid var(--brd); transition:all var(--tr);
}
.stat-box:hover { transform:translateY(-2px); box-shadow:var(--sh2); }
.stat-box b { font-size:24px; font-weight:800; display:block; color:var(--acc); }
.stat-box small { font-size:11px; color:var(--tx3); }
.result-list { display:flex; flex-direction:column; gap:9px; }
.res-item {
    background:var(--bg2); border-radius:var(--r2);
    padding:14px 18px; display:flex; align-items:center;
    gap:14px; border:1px solid var(--brd); transition:all var(--tr);
}
.res-item:hover { box-shadow:var(--sh1); }
.res-badge {
    width:48px; height:48px; border-radius:50%;
    display:flex; align-items:center; justify-content:center;
    font-weight:800; font-size:14px; flex-shrink:0;
}
.res-badge.rg { background:var(--greenbg); color:var(--green); }
.res-badge.ra { background:var(--accbg); color:var(--acc); }
.res-badge.rw { background:var(--warnbg); color:#b58900; }
.res-badge.rb { background:var(--redbg); color:var(--red); }
.res-info { flex:1; }
.res-info h4 { font-size:14px; font-weight:600; margin-bottom:3px; }
.res-meta { font-size:11px; color:var(--tx3); display:flex; gap:10px; flex-wrap:wrap; }
.res-del {
    width:28px; height:28px; border-radius:50%; border:none;
    background:var(--redbg); color:var(--red); font-size:13px;
    cursor:pointer; display:flex; align-items:center; justify-content:center;
    transition:all var(--tr);
}
.res-del:hover { background:var(--red); color:#fff; }
.bm-list { display:flex; flex-direction:column; gap:12px; }
.bm-card {
    background:var(--bg2); border-radius:var(--r2);
    padding:18px; border:1px solid var(--brd);
    display:flex; align-items:center; gap:16px;
    transition:all var(--tr);
}
.bm-card:hover { box-shadow:var(--sh1); }
.bm-emoji { font-size:30px; flex-shrink:0; }
.bm-info { flex:1; }
.bm-info h4 { font-size:14px; font-weight:700; margin-bottom:3px; }
.bm-info-meta { font-size:11px; color:var(--tx3); display:flex; gap:10px; flex-wrap:wrap; }
.bm-actions { display:flex; gap:6px; }
.bm-actions button {
    padding:7px 14px; border-radius:var(--r1);
    font-family:inherit; font-size:12px; font-weight:600;
    cursor:pointer; transition:all var(--tr); border:none;
}
.overlay {
    position:fixed; inset:0; background:rgba(0,0,0,.45);
    backdrop-filter:blur(4px); z-index:200;
    display:none; align-items:center; justify-content:center; padding:20px;
}
.overlay.open { display:flex; }
.modal {
    background:var(--bg2); border-radius:var(--r3);
    width:100%; max-width:500px; max-height:90vh;
    overflow-y:auto; box-shadow:var(--sh3); animation:slideUp .25s ease;
}
.modal-sm { max-width:360px; padding:24px; }
@keyframes slideUp { from{opacity:0;transform:translateY(16px)} to{opacity:1;transform:translateY(0)} }
.modal-top {
    display:flex; align-items:center; justify-content:space-between;
    padding:18px 22px; border-bottom:1px solid var(--brd);
}
.modal-top h3 { font-size:16px; font-weight:700; }
.modal-body { padding:22px; }
.field { margin-bottom:14px; }
.field label { display:block; font-size:12px; font-weight:600; color:var(--tx2); margin-bottom:5px; }
.field input {
    width:100%; padding:9px 13px; border:2px solid var(--brd);
    border-radius:var(--r1); font-family:inherit; font-size:13px;
    background:var(--bg3); color:var(--tx); outline:none;
    transition:border-color var(--tr);
}
.field input:focus { border-color:var(--acc); }
.hint { font-size:10px; color:var(--tx3); margin-top:3px; display:block; line-height:1.4; }
.field-row { display:grid; grid-template-columns:1fr 1fr 1fr; gap:10px; }
.check-row {
    display:flex; align-items:center; gap:8px;
    font-size:13px; color:var(--tx2); margin-bottom:16px;
    cursor:pointer;
}
.check-row input { width:16px; height:16px; accent-color:var(--acc); }
.load-msg {
    padding:10px 14px; border-radius:var(--r1);
    font-size:12px; margin-bottom:14px;
}
.load-msg.info { background:var(--accbg); color:var(--acc); display:flex; align-items:center; gap:8px; }
.load-msg.err { background:var(--redbg); color:var(--red); }
.load-msg.ok { background:var(--greenbg); color:var(--green); }
.spin {
    width:16px; height:16px; border:2px solid var(--accbg);
    border-top-color:var(--acc); border-radius:50%;
    animation:spin .6s linear infinite; flex-shrink:0;
}
@keyframes spin { to{transform:rotate(360deg)} }
.cf-title { font-size:16px; margin-bottom:10px; }
.cf-msg { font-size:13px; color:var(--tx2); margin-bottom:20px; line-height:1.5; }
.cf-btns { display:flex; gap:10px; justify-content:flex-end; }
@media(max-width:600px) {
    .brand { font-size:18px; }
    .quiz-grid { grid-template-columns:1fr; }
    .field-row { grid-template-columns:1fr; }
    .q-area { padding:18px; }
    .q-text { font-size:15px; }
    .dot-wrap { display:none; }
    .stats-row { grid-template-columns:repeat(2,1fr); }
    .rv-stats { gap:14px; }
    .tab-txt { font-size:12px; }
}
